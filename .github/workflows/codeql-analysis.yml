name: test
on:
  workflow_dispatch:
  push:
   branches:
   - '*'

jobs:
 job1:
    if: |
     startsWith( github.ref, 'refs/heads/dev-*')   ||
     startsWith( github.ref, 'refs/heads/test-US-*')  ||
     startsWith( github.ref, 'refs/heads/stage-*') ||
     startsWith( github.ref, 'refs/heads/master-*')
    runs-on: [ ubuntu-latest ]
    outputs:
      output1: ${{ steps.step1.outputs.test }}
  
    steps:
     - id: step1
       run: echo "test=hello" >> "$GITHUB_OUTPUT"
 job2:
    runs-on: [ ubuntu-latest ]
    steps:
    - name: Branch check
      if: ${{needs.job1.outputs.output1 != 'hello'}}
      run: |
         echo "Not Matching branches"
         exit 1
